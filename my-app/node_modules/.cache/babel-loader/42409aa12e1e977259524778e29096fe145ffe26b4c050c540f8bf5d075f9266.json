{"ast":null,"code":"import React,{useCallback,useEffect,useState,useRef}from\"react\";import{socket}from\"../socket/Socket\";import{connect,useDispatch,useSelector}from\"react-redux\";import{selectAllMessages,selectAllUsers,selectUserId,setAllMessages}from\"./helpSlice\";import{NavigationType,useNavigate}from\"react-router-dom\";import peer from\"./Peer\";import ReactPlayer from\"react-player\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Video=()=>{const[ms,setMs]=useState(null);const[rs,setRs]=useState(null);const[rec,setRec]=useState(null);const userId=useSelector(selectUserId);const onlineUsers=useSelector(selectAllUsers);const navigate=useNavigate();const dispatch=useDispatch();const newVideo=useCallback(()=>{peer.initializePeer();socket.emit(\"pairing-user-video\",userId,error=>{return error;});socket.on(\"user-paired\",async _ref=>{let{rid,type}=_ref;setRec(rid);if(type===\"call\"){const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:true});setMs(stream);const offer=await peer.getOffer();console.log(offer,\"creakjjkted-offer\");socket.emit(\"user:call\",{to:rid,offer});}});socket.on(\"user-call\",async _ref2=>{let{from,offer}=_ref2;console.log(offer,\"got-offer\");setRec(from);const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:true});setMs(stream);console.log(\"bheje\",offer);const answer=await peer.getAnswer(offer);socket.emit(\"call:accepted\",{to:from,ans:answer});});socket.on(\"call-accept\",async answer=>{console.log(answer,\"cretaed-answer\");await peer.setLocalDescription(answer);});return()=>{socket.off(\"user-paired\");socket.off(\"user-call\");socket.off(\"call-accept\");};},[]);useEffect(()=>{const trackEventListener=ev=>{const remoteStream=ev.streams[0];console.log(\"Got remote tracks\",remoteStream);setRs(remoteStream);};if(peer.peer&&peer.peer!==null){peer.peer.addEventListener(\"track\",trackEventListener);}return()=>{if(peer.peer&&peer.peer!==null){peer.peer.removeEventListener(\"track\",trackEventListener);}};},[rs,peer.peer]);useEffect(()=>{if(userId&&onlineUsers.find(user=>user.id===userId)){newVideo();}else{navigate(\"/\");}},[]);const handleNegotiation=useCallback(async()=>{console.log(\"Negotiation needed\");const offer=await peer.getOffer();console.log(offer,\"nego offer cretaed\");socket.emit(\"peer:nego:needed\",{offer,to:rec});},[rec]);useEffect(()=>{{peer.peer&&peer.peer.addEventListener(\"negotiationneeded\",handleNegotiation);}return()=>{{peer.peer&&peer.peer.removeEventListener(\"negotiationneeded\",handleNegotiation);}};},[handleNegotiation]);const handleFinalNego=useCallback(async _ref3=>{let{from,ans}=_ref3;await peer.setLocalDescription(ans);// helpStream()\n});useEffect(()=>{socket.on(\"peer:nego:needed\",async _ref4=>{let{from,offer}=_ref4;console.log(\"Received negotiation needed\");console.log(from,offer);const answer=await peer.getAnswer(offer);socket.emit(\"peer:nego:done\",{to:from,ans:answer});});socket.on(\"peer:nego:done\",async _ref5=>{let{from,ans}=_ref5;console.log(\"Negotiation done\",ans);await peer.setRemoteDescription(ans);});socket.on(\"peer:nego:final\",handleFinalNego);return()=>{socket.off(\"peer:nego:needed\");socket.off(\"peer:nego:done\");socket.off(\"peer:nego:final\");};},[rec]);// const helpStream = useCallback(() => {\n//  if(ms ){\n//     for (const track of ms.getTracks()) {\n//       peer.peer.addTrack(track, ms);\n//     }\n//   }\n// }, [ms]);\nuseEffect(()=>{if(ms&&peer.peer){console.log(\"chahha\");for(const track of ms.getTracks()){peer.peer.addTrack(track,ms);}}},[ms]);// .....................................................chat....................................................\nconst[message,setMessage]=useState(null);const chatBoxRef=useRef(null);const allMessages=useSelector(selectAllMessages);const handleClick=()=>{if(message.length===0){return;}dispatch(setAllMessages({message:message,type:\"you\"}));socket.emit(\"send-message\",{rec,message});setMessage(\"\");};const handleKeyPress=e=>{if(e.key===\"Enter\"){dispatch(setAllMessages({message:message,type:\"you\"}));socket.emit(\"send-message\",{reciever:rec,message});setMessage(null);}};useEffect(()=>{console.log(\"chla\");socket.on(\"send-message\",message=>{dispatch(setAllMessages({message:message,type:\"stranger\"}));setMessage(null);});return()=>{socket.off(\"send-message\");};},[dispatch]);const handleStop=()=>{// setStop(true);\nif(rec){socket.emit(\"chat-close\",rec,()=>{return{};});peer.closeConnection();setRec(null);setRs(null);setMs(null);dispatch(setAllMessages({type:\"end\"}));}else{socket.emit(\"unpairing-user-video\",userId,()=>{});}// navigate(\"/\")\n};useEffect(()=>{socket.on(\"chat-close\",()=>{// setStop(true);\npeer.closeConnection();setRec(null);dispatch(setAllMessages({type:\"end\"}));setMessage(\"\");setMs(null);setRs(null);});return()=>{socket.off(\"chat-close\");};},[dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen bg-gray-100 \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row h-full pl-52\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:w-1/3 w-full flex flex-col p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 m-2 bg-gray-200 flex items-center justify-center border border-gray-300\",children:/*#__PURE__*/_jsx(ReactPlayer,{playing:true,muted:true,height:\"300px\",width:\"300px\",url:rs})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 m-2 bg-gray-200 flex items-center justify-center border border-gray-300\",children:/*#__PURE__*/_jsx(ReactPlayer,{playing:true,muted:true,height:\"300px\",width:\"300px\",url:ms})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:w-1/2 w-full flex flex-col p-2 border-t md:border-t-0 md:border-l border-gray-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-12 bg-gray-300 flex items-center justify-center border-b border-gray-900\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Chat\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-2 overflow-y-auto bg-gray-950 border-gray-900\",children:allMessages.map((mess,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-start mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-4 max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(mess.type===\"you\"?\"text-amber-400\":\"text-blue-400\",\" m-auto\"),children:mess.type}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold font-serif \".concat(mess.type===\"you\"?\"text-white\":\"text-white\"),children:mess.message})]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex p-2 border-t border-gray-300 bg-gray-100\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),onKeyDown:e=>handleKeyPress(e),ref:chatBoxRef,placeholder:\"Type a message...\",className:\"flex-1 p-2 border border-gray-300 rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"ml-2 p-2 bg-blue-500 text-white rounded-md\",children:\"Send\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-0 w-1/3 left-0 right-0 bg-white p-2 border-t border-gray-300 flex justify-around md:justify-start md:space-x-4 ml-52\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-red-500 text-white rounded-md\",onClick:handleStop,children:\"Stop\"}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-green-500 text-white rounded-md\",onClick:newVideo,children:\"New\"}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-blue-500 text-white rounded-md\",children:rec?\"found\":\"Not found\"}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-blue-500 text-white rounded-md\"// onClick={helpStream}\n,children:ms?\"c\":\"Nc\"})]})]});};export default Video;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useRef","socket","connect","useDispatch","useSelector","selectAllMessages","selectAllUsers","selectUserId","setAllMessages","NavigationType","useNavigate","peer","ReactPlayer","jsx","_jsx","jsxs","_jsxs","Video","ms","setMs","rs","setRs","rec","setRec","userId","onlineUsers","navigate","dispatch","newVideo","initializePeer","emit","error","on","_ref","rid","type","stream","navigator","mediaDevices","getUserMedia","audio","video","offer","getOffer","console","log","to","_ref2","from","answer","getAnswer","ans","setLocalDescription","off","trackEventListener","ev","remoteStream","streams","addEventListener","removeEventListener","find","user","id","handleNegotiation","handleFinalNego","_ref3","_ref4","_ref5","setRemoteDescription","track","getTracks","addTrack","message","setMessage","chatBoxRef","allMessages","handleClick","length","handleKeyPress","e","key","reciever","handleStop","closeConnection","className","children","playing","muted","height","width","url","map","mess","index","concat","value","onChange","target","onKeyDown","ref","placeholder","onClick"],"sources":["C:/Users/kuljeet/Desktop/catchup-final/client/my-app/src/features/Functions/Video.js"],"sourcesContent":["import React, { useCallback, useEffect, useState, useRef } from \"react\";\r\nimport { socket } from \"../socket/Socket\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectAllMessages,\r\n  selectAllUsers,\r\n  selectUserId,\r\n  setAllMessages,\r\n} from \"./helpSlice\";\r\nimport { NavigationType, useNavigate } from \"react-router-dom\";\r\nimport peer from \"./Peer\";\r\nimport ReactPlayer from \"react-player\";\r\n\r\nconst Video = () => {\r\n  const [ms, setMs] = useState(null);\r\n  const [rs, setRs] = useState(null);\r\n  const [rec, setRec] = useState(null);\r\n  const userId = useSelector(selectUserId);\r\n  const onlineUsers = useSelector(selectAllUsers);\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const newVideo = useCallback(() => {\r\n   \r\n    peer.initializePeer();\r\n    socket.emit(\"pairing-user-video\", userId, (error) => {\r\n      return error;\r\n    });\r\n\r\n    socket.on(\"user-paired\", async ({ rid, type }) => {\r\n      setRec(rid);\r\n      if (type === \"call\") {\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: true,\r\n          video: true,\r\n        });\r\n        setMs(stream);\r\n\r\n        const offer = await peer.getOffer();\r\n        console.log(offer, \"creakjjkted-offer\");\r\n        socket.emit(\"user:call\", { to: rid, offer });\r\n      }\r\n    });\r\n\r\n    socket.on(\"user-call\", async ({ from, offer }) => {\r\n      console.log(offer, \"got-offer\");\r\n      setRec(from);\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        audio: true,\r\n        video: true,\r\n      });\r\n\r\n      setMs(stream);\r\n      console.log(\"bheje\",offer)\r\n      const answer = await peer.getAnswer(offer);\r\n      socket.emit(\"call:accepted\", { to: from, ans: answer });\r\n    });\r\n\r\n    socket.on(\"call-accept\", async (answer) => {\r\n      console.log(answer, \"cretaed-answer\");\r\n      await peer.setLocalDescription(answer);\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"user-paired\");\r\n      socket.off(\"user-call\");\r\n      socket.off(\"call-accept\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const trackEventListener = (ev) => {\r\n      const remoteStream = ev.streams[0];\r\n      console.log(\"Got remote tracks\", remoteStream);\r\n      setRs(remoteStream);\r\n    };\r\n\r\n    if (peer.peer && peer.peer !== null) {\r\n      peer.peer.addEventListener(\"track\", trackEventListener);\r\n    }\r\n\r\n    return () => {\r\n      if (peer.peer && peer.peer !== null) {\r\n        peer.peer.removeEventListener(\"track\", trackEventListener);\r\n      }\r\n    };\r\n  }, [rs, peer.peer]);\r\n\r\n  useEffect(() => {\r\n    if (userId && onlineUsers.find((user) => user.id === userId)) {\r\n      newVideo();\r\n    } else {\r\n      navigate(\"/\");\r\n    }\r\n  }, []);\r\n\r\n  const handleNegotiation = useCallback(async () => {\r\n    console.log(\"Negotiation needed\");\r\n    const offer = await peer.getOffer();\r\n    console.log(offer, \"nego offer cretaed\");\r\n    socket.emit(\"peer:nego:needed\", { offer, to: rec });\r\n  }, [rec]);\r\n\r\n  useEffect(() => {\r\n    {\r\n      peer.peer &&\r\n        peer.peer.addEventListener(\"negotiationneeded\", handleNegotiation);\r\n    }\r\n    return () => {\r\n      {\r\n        peer.peer &&\r\n          peer.peer.removeEventListener(\"negotiationneeded\", handleNegotiation);\r\n      }\r\n    };\r\n  }, [handleNegotiation]);\r\n\r\n  const handleFinalNego = useCallback(async ({ from, ans }) => {\r\n    await peer.setLocalDescription(ans);\r\n    // helpStream()\r\n  });\r\n\r\n  useEffect(() => {\r\n    socket.on(\"peer:nego:needed\", async ({ from, offer }) => {\r\n      console.log(\"Received negotiation needed\");\r\n      console.log(from, offer);\r\n      const answer = await peer.getAnswer(offer);\r\n      socket.emit(\"peer:nego:done\", { to: from, ans: answer });\r\n    });\r\n\r\n    socket.on(\"peer:nego:done\", async ({ from, ans }) => {\r\n      console.log(\"Negotiation done\", ans);\r\n      await peer.setRemoteDescription(ans);\r\n    });\r\n\r\n    socket.on(\"peer:nego:final\", handleFinalNego);\r\n\r\n    return () => {\r\n      socket.off(\"peer:nego:needed\");\r\n      socket.off(\"peer:nego:done\");\r\n      socket.off(\"peer:nego:final\");\r\n    };\r\n  }, [rec]);\r\n\r\n  // const helpStream = useCallback(() => {\r\n     \r\n  //  if(ms ){\r\n     \r\n  //     for (const track of ms.getTracks()) {\r\n  //       peer.peer.addTrack(track, ms);\r\n  //     }\r\n  //   }\r\n\r\n\r\n  // }, [ms]);\r\n\r\n\r\n  useEffect(()=>{\r\n    if(ms && peer.peer){\r\n      console.log(\"chahha\")\r\n      for (const track of ms.getTracks()) {\r\n        peer.peer.addTrack(track, ms);\r\n      }\r\n    }\r\n  },[ms])\r\n\r\n  // .....................................................chat....................................................\r\n  const [message, setMessage] = useState(null);\r\n  const chatBoxRef = useRef(null);\r\n  const allMessages = useSelector(selectAllMessages);\r\n\r\n  const handleClick = () => {\r\n    if (message.length === 0) {\r\n      return;\r\n    }\r\n    dispatch(setAllMessages({ message: message, type: \"you\" }));\r\n    socket.emit(\"send-message\", { rec, message });\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      dispatch(setAllMessages({ message: message, type: \"you\" }));\r\n      socket.emit(\"send-message\", { reciever: rec, message });\r\n      setMessage(null);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"chla\");\r\n    socket.on(\"send-message\", (message) => {\r\n      dispatch(setAllMessages({ message: message, type: \"stranger\" }));\r\n      setMessage(null);\r\n    });\r\n    return () => {\r\n      socket.off(\"send-message\");\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const handleStop = () => {\r\n    // setStop(true);\r\n    if (rec) {\r\n      socket.emit(\"chat-close\", rec, () => {\r\n        return {};\r\n      });\r\n      peer.closeConnection();\r\n      setRec(null);\r\n      setRs(null);\r\n      setMs(null);\r\n\r\n      dispatch(setAllMessages({ type: \"end\" }));\r\n\r\n    } else {\r\n      socket.emit(\"unpairing-user-video\", userId, () => {});\r\n    }\r\n    // navigate(\"/\")\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"chat-close\", () => {\r\n      // setStop(true);\r\n      peer.closeConnection();\r\n      setRec(null);\r\n      dispatch(setAllMessages({ type: \"end\" }));\r\n      setMessage(\"\");\r\n      setMs(null);\r\n      setRs(null);\r\n    });\r\n    return () => {\r\n      socket.off(\"chat-close\");\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className=\"h-screen bg-gray-100 \">\r\n      <div className=\"flex flex-col md:flex-row h-full pl-52\">\r\n        <div className=\"md:w-1/3 w-full flex flex-col p-2\">\r\n          <div className=\"flex-1 m-2 bg-gray-200 flex items-center justify-center border border-gray-300\">\r\n            <ReactPlayer playing muted height=\"300px\" width=\"300px\" url={rs} />\r\n          </div>\r\n          <div className=\"flex-1 m-2 bg-gray-200 flex items-center justify-center border border-gray-300\">\r\n            <ReactPlayer playing muted height=\"300px\" width=\"300px\" url={ms} />\r\n          </div>\r\n        </div>\r\n        <div className=\"md:w-1/2 w-full flex flex-col p-2 border-t md:border-t-0 md:border-l border-gray-300\">\r\n          <div className=\"h-12 bg-gray-300 flex items-center justify-center border-b border-gray-900\">\r\n            <h2>Chat</h2>\r\n          </div>\r\n          <div className=\"flex-1 p-2 overflow-y-auto bg-gray-950 border-gray-900\">\r\n            {allMessages.map((mess, index) => (\r\n              <div key={index} className=\"flex items-start justify-start mb-4\">\r\n                <div className=\"rounded-lg p-4 max-w-xs\">\r\n                  <p\r\n                    className={`${\r\n                      mess.type === \"you\" ? \"text-amber-400\" : \"text-blue-400\"\r\n                    } m-auto`}\r\n                  >\r\n                    {mess.type}\r\n                  </p>\r\n                  <p\r\n                    className={`text-xl font-bold font-serif ${\r\n                      mess.type === \"you\" ? \"text-white\" : \"text-white\"\r\n                    }`}\r\n                  >\r\n                    {mess.message}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"flex p-2 border-t border-gray-300 bg-gray-100\">\r\n            <input\r\n              type=\"text\"\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              onKeyDown={(e) => handleKeyPress(e)}\r\n              ref={chatBoxRef}\r\n              placeholder=\"Type a message...\"\r\n              className=\"flex-1 p-2 border border-gray-300 rounded-md\"\r\n            />\r\n            <button\r\n              onClick={handleClick}\r\n              className=\"ml-2 p-2 bg-blue-500 text-white rounded-md\"\r\n            >\r\n              Send\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"fixed bottom-0 w-1/3 left-0 right-0 bg-white p-2 border-t border-gray-300 flex justify-around md:justify-start md:space-x-4 ml-52\">\r\n        <button\r\n          className=\"p-2 bg-red-500 text-white rounded-md\"\r\n          onClick={handleStop}\r\n        >\r\n          Stop\r\n        </button>\r\n        <button\r\n          className=\"p-2 bg-green-500 text-white rounded-md\"\r\n          onClick={newVideo}\r\n        >\r\n          New\r\n        </button>\r\n        <button className=\"p-2 bg-blue-500 text-white rounded-md\">\r\n          {rec ? \"found\" : \"Not found\"}\r\n        </button>\r\n        <button\r\n          className=\"p-2 bg-blue-500 text-white rounded-md\"\r\n          // onClick={helpStream}\r\n        >\r\n          {ms ? \"c\" : \"Nc\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Video;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CACvE,OAASC,MAAM,KAAQ,kBAAkB,CACzC,OAASC,OAAO,CAAEC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAC/D,OACEC,iBAAiB,CACjBC,cAAc,CACdC,YAAY,CACZC,cAAc,KACT,aAAa,CACpB,OAASC,cAAc,CAAEC,WAAW,KAAQ,kBAAkB,CAC9D,MAAO,CAAAC,IAAI,KAAM,QAAQ,CACzB,MAAO,CAAAC,WAAW,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,EAAE,CAAEC,KAAK,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAClC,KAAM,CAACqB,EAAE,CAAEC,KAAK,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAClC,KAAM,CAACuB,GAAG,CAAEC,MAAM,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CACpC,KAAM,CAAAyB,MAAM,CAAGpB,WAAW,CAACG,YAAY,CAAC,CACxC,KAAM,CAAAkB,WAAW,CAAGrB,WAAW,CAACE,cAAc,CAAC,CAC/C,KAAM,CAAAoB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAiB,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAyB,QAAQ,CAAG/B,WAAW,CAAC,IAAM,CAEjCc,IAAI,CAACkB,cAAc,CAAC,CAAC,CACrB5B,MAAM,CAAC6B,IAAI,CAAC,oBAAoB,CAAEN,MAAM,CAAGO,KAAK,EAAK,CACnD,MAAO,CAAAA,KAAK,CACd,CAAC,CAAC,CAEF9B,MAAM,CAAC+B,EAAE,CAAC,aAAa,CAAE,MAAAC,IAAA,EAAyB,IAAlB,CAAEC,GAAG,CAAEC,IAAK,CAAC,CAAAF,IAAA,CAC3CV,MAAM,CAACW,GAAG,CAAC,CACX,GAAIC,IAAI,GAAK,MAAM,CAAE,CACnB,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CACvDC,KAAK,CAAE,IAAI,CACXC,KAAK,CAAE,IACT,CAAC,CAAC,CACFtB,KAAK,CAACiB,MAAM,CAAC,CAEb,KAAM,CAAAM,KAAK,CAAG,KAAM,CAAA/B,IAAI,CAACgC,QAAQ,CAAC,CAAC,CACnCC,OAAO,CAACC,GAAG,CAACH,KAAK,CAAE,mBAAmB,CAAC,CACvCzC,MAAM,CAAC6B,IAAI,CAAC,WAAW,CAAE,CAAEgB,EAAE,CAAEZ,GAAG,CAAEQ,KAAM,CAAC,CAAC,CAC9C,CACF,CAAC,CAAC,CAEFzC,MAAM,CAAC+B,EAAE,CAAC,WAAW,CAAE,MAAAe,KAAA,EAA2B,IAApB,CAAEC,IAAI,CAAEN,KAAM,CAAC,CAAAK,KAAA,CAC3CH,OAAO,CAACC,GAAG,CAACH,KAAK,CAAE,WAAW,CAAC,CAC/BnB,MAAM,CAACyB,IAAI,CAAC,CACZ,KAAM,CAAAZ,MAAM,CAAG,KAAM,CAAAC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CACvDC,KAAK,CAAE,IAAI,CACXC,KAAK,CAAE,IACT,CAAC,CAAC,CAEFtB,KAAK,CAACiB,MAAM,CAAC,CACbQ,OAAO,CAACC,GAAG,CAAC,OAAO,CAACH,KAAK,CAAC,CAC1B,KAAM,CAAAO,MAAM,CAAG,KAAM,CAAAtC,IAAI,CAACuC,SAAS,CAACR,KAAK,CAAC,CAC1CzC,MAAM,CAAC6B,IAAI,CAAC,eAAe,CAAE,CAAEgB,EAAE,CAAEE,IAAI,CAAEG,GAAG,CAAEF,MAAO,CAAC,CAAC,CACzD,CAAC,CAAC,CAEFhD,MAAM,CAAC+B,EAAE,CAAC,aAAa,CAAE,KAAO,CAAAiB,MAAM,EAAK,CACzCL,OAAO,CAACC,GAAG,CAACI,MAAM,CAAE,gBAAgB,CAAC,CACrC,KAAM,CAAAtC,IAAI,CAACyC,mBAAmB,CAACH,MAAM,CAAC,CACxC,CAAC,CAAC,CAEF,MAAO,IAAM,CACXhD,MAAM,CAACoD,GAAG,CAAC,aAAa,CAAC,CACzBpD,MAAM,CAACoD,GAAG,CAAC,WAAW,CAAC,CACvBpD,MAAM,CAACoD,GAAG,CAAC,aAAa,CAAC,CAC3B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAENvD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAwD,kBAAkB,CAAIC,EAAE,EAAK,CACjC,KAAM,CAAAC,YAAY,CAAGD,EAAE,CAACE,OAAO,CAAC,CAAC,CAAC,CAClCb,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEW,YAAY,CAAC,CAC9CnC,KAAK,CAACmC,YAAY,CAAC,CACrB,CAAC,CAED,GAAI7C,IAAI,CAACA,IAAI,EAAIA,IAAI,CAACA,IAAI,GAAK,IAAI,CAAE,CACnCA,IAAI,CAACA,IAAI,CAAC+C,gBAAgB,CAAC,OAAO,CAAEJ,kBAAkB,CAAC,CACzD,CAEA,MAAO,IAAM,CACX,GAAI3C,IAAI,CAACA,IAAI,EAAIA,IAAI,CAACA,IAAI,GAAK,IAAI,CAAE,CACnCA,IAAI,CAACA,IAAI,CAACgD,mBAAmB,CAAC,OAAO,CAAEL,kBAAkB,CAAC,CAC5D,CACF,CAAC,CACH,CAAC,CAAE,CAAClC,EAAE,CAAET,IAAI,CAACA,IAAI,CAAC,CAAC,CAEnBb,SAAS,CAAC,IAAM,CACd,GAAI0B,MAAM,EAAIC,WAAW,CAACmC,IAAI,CAAEC,IAAI,EAAKA,IAAI,CAACC,EAAE,GAAKtC,MAAM,CAAC,CAAE,CAC5DI,QAAQ,CAAC,CAAC,CACZ,CAAC,IAAM,CACLF,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAqC,iBAAiB,CAAGlE,WAAW,CAAC,SAAY,CAChD+C,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjC,KAAM,CAAAH,KAAK,CAAG,KAAM,CAAA/B,IAAI,CAACgC,QAAQ,CAAC,CAAC,CACnCC,OAAO,CAACC,GAAG,CAACH,KAAK,CAAE,oBAAoB,CAAC,CACxCzC,MAAM,CAAC6B,IAAI,CAAC,kBAAkB,CAAE,CAAEY,KAAK,CAAEI,EAAE,CAAExB,GAAI,CAAC,CAAC,CACrD,CAAC,CAAE,CAACA,GAAG,CAAC,CAAC,CAETxB,SAAS,CAAC,IAAM,CACd,CACEa,IAAI,CAACA,IAAI,EACPA,IAAI,CAACA,IAAI,CAAC+C,gBAAgB,CAAC,mBAAmB,CAAEK,iBAAiB,CAAC,CACtE,CACA,MAAO,IAAM,CACX,CACEpD,IAAI,CAACA,IAAI,EACPA,IAAI,CAACA,IAAI,CAACgD,mBAAmB,CAAC,mBAAmB,CAAEI,iBAAiB,CAAC,CACzE,CACF,CAAC,CACH,CAAC,CAAE,CAACA,iBAAiB,CAAC,CAAC,CAEvB,KAAM,CAAAC,eAAe,CAAGnE,WAAW,CAAC,MAAAoE,KAAA,EAAyB,IAAlB,CAAEjB,IAAI,CAAEG,GAAI,CAAC,CAAAc,KAAA,CACtD,KAAM,CAAAtD,IAAI,CAACyC,mBAAmB,CAACD,GAAG,CAAC,CACnC;AACF,CAAC,CAAC,CAEFrD,SAAS,CAAC,IAAM,CACdG,MAAM,CAAC+B,EAAE,CAAC,kBAAkB,CAAE,MAAAkC,KAAA,EAA2B,IAApB,CAAElB,IAAI,CAAEN,KAAM,CAAC,CAAAwB,KAAA,CAClDtB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC1CD,OAAO,CAACC,GAAG,CAACG,IAAI,CAAEN,KAAK,CAAC,CACxB,KAAM,CAAAO,MAAM,CAAG,KAAM,CAAAtC,IAAI,CAACuC,SAAS,CAACR,KAAK,CAAC,CAC1CzC,MAAM,CAAC6B,IAAI,CAAC,gBAAgB,CAAE,CAAEgB,EAAE,CAAEE,IAAI,CAAEG,GAAG,CAAEF,MAAO,CAAC,CAAC,CAC1D,CAAC,CAAC,CAEFhD,MAAM,CAAC+B,EAAE,CAAC,gBAAgB,CAAE,MAAAmC,KAAA,EAAyB,IAAlB,CAAEnB,IAAI,CAAEG,GAAI,CAAC,CAAAgB,KAAA,CAC9CvB,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEM,GAAG,CAAC,CACpC,KAAM,CAAAxC,IAAI,CAACyD,oBAAoB,CAACjB,GAAG,CAAC,CACtC,CAAC,CAAC,CAEFlD,MAAM,CAAC+B,EAAE,CAAC,iBAAiB,CAAEgC,eAAe,CAAC,CAE7C,MAAO,IAAM,CACX/D,MAAM,CAACoD,GAAG,CAAC,kBAAkB,CAAC,CAC9BpD,MAAM,CAACoD,GAAG,CAAC,gBAAgB,CAAC,CAC5BpD,MAAM,CAACoD,GAAG,CAAC,iBAAiB,CAAC,CAC/B,CAAC,CACH,CAAC,CAAE,CAAC/B,GAAG,CAAC,CAAC,CAET;AAEA;AAEA;AACA;AACA;AACA;AAGA;AAGAxB,SAAS,CAAC,IAAI,CACZ,GAAGoB,EAAE,EAAIP,IAAI,CAACA,IAAI,CAAC,CACjBiC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrB,IAAK,KAAM,CAAAwB,KAAK,GAAI,CAAAnD,EAAE,CAACoD,SAAS,CAAC,CAAC,CAAE,CAClC3D,IAAI,CAACA,IAAI,CAAC4D,QAAQ,CAACF,KAAK,CAAEnD,EAAE,CAAC,CAC/B,CACF,CACF,CAAC,CAAC,CAACA,EAAE,CAAC,CAAC,CAEP;AACA,KAAM,CAACsD,OAAO,CAAEC,UAAU,CAAC,CAAG1E,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAA2E,UAAU,CAAG1E,MAAM,CAAC,IAAI,CAAC,CAC/B,KAAM,CAAA2E,WAAW,CAAGvE,WAAW,CAACC,iBAAiB,CAAC,CAElD,KAAM,CAAAuE,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAIJ,OAAO,CAACK,MAAM,GAAK,CAAC,CAAE,CACxB,OACF,CACAlD,QAAQ,CAACnB,cAAc,CAAC,CAAEgE,OAAO,CAAEA,OAAO,CAAErC,IAAI,CAAE,KAAM,CAAC,CAAC,CAAC,CAC3DlC,MAAM,CAAC6B,IAAI,CAAC,cAAc,CAAE,CAAER,GAAG,CAAEkD,OAAQ,CAAC,CAAC,CAC7CC,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CAED,KAAM,CAAAK,cAAc,CAAIC,CAAC,EAAK,CAC5B,GAAIA,CAAC,CAACC,GAAG,GAAK,OAAO,CAAE,CACrBrD,QAAQ,CAACnB,cAAc,CAAC,CAAEgE,OAAO,CAAEA,OAAO,CAAErC,IAAI,CAAE,KAAM,CAAC,CAAC,CAAC,CAC3DlC,MAAM,CAAC6B,IAAI,CAAC,cAAc,CAAE,CAAEmD,QAAQ,CAAE3D,GAAG,CAAEkD,OAAQ,CAAC,CAAC,CACvDC,UAAU,CAAC,IAAI,CAAC,CAClB,CACF,CAAC,CAED3E,SAAS,CAAC,IAAM,CACd8C,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC,CACnB5C,MAAM,CAAC+B,EAAE,CAAC,cAAc,CAAGwC,OAAO,EAAK,CACrC7C,QAAQ,CAACnB,cAAc,CAAC,CAAEgE,OAAO,CAAEA,OAAO,CAAErC,IAAI,CAAE,UAAW,CAAC,CAAC,CAAC,CAChEsC,UAAU,CAAC,IAAI,CAAC,CAClB,CAAC,CAAC,CACF,MAAO,IAAM,CACXxE,MAAM,CAACoD,GAAG,CAAC,cAAc,CAAC,CAC5B,CAAC,CACH,CAAC,CAAE,CAAC1B,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAuD,UAAU,CAAGA,CAAA,GAAM,CACvB;AACA,GAAI5D,GAAG,CAAE,CACPrB,MAAM,CAAC6B,IAAI,CAAC,YAAY,CAAER,GAAG,CAAE,IAAM,CACnC,MAAO,CAAC,CAAC,CACX,CAAC,CAAC,CACFX,IAAI,CAACwE,eAAe,CAAC,CAAC,CACtB5D,MAAM,CAAC,IAAI,CAAC,CACZF,KAAK,CAAC,IAAI,CAAC,CACXF,KAAK,CAAC,IAAI,CAAC,CAEXQ,QAAQ,CAACnB,cAAc,CAAC,CAAE2B,IAAI,CAAE,KAAM,CAAC,CAAC,CAAC,CAE3C,CAAC,IAAM,CACLlC,MAAM,CAAC6B,IAAI,CAAC,sBAAsB,CAAEN,MAAM,CAAE,IAAM,CAAC,CAAC,CAAC,CACvD,CACA;AACF,CAAC,CAED1B,SAAS,CAAC,IAAM,CACdG,MAAM,CAAC+B,EAAE,CAAC,YAAY,CAAE,IAAM,CAC5B;AACArB,IAAI,CAACwE,eAAe,CAAC,CAAC,CACtB5D,MAAM,CAAC,IAAI,CAAC,CACZI,QAAQ,CAACnB,cAAc,CAAC,CAAE2B,IAAI,CAAE,KAAM,CAAC,CAAC,CAAC,CACzCsC,UAAU,CAAC,EAAE,CAAC,CACdtD,KAAK,CAAC,IAAI,CAAC,CACXE,KAAK,CAAC,IAAI,CAAC,CACb,CAAC,CAAC,CACF,MAAO,IAAM,CACXpB,MAAM,CAACoD,GAAG,CAAC,YAAY,CAAC,CAC1B,CAAC,CACH,CAAC,CAAE,CAAC1B,QAAQ,CAAC,CAAC,CAEd,mBACEX,KAAA,QAAKoE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCrE,KAAA,QAAKoE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDrE,KAAA,QAAKoE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDvE,IAAA,QAAKsE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FvE,IAAA,CAACF,WAAW,EAAC0E,OAAO,MAACC,KAAK,MAACC,MAAM,CAAC,OAAO,CAACC,KAAK,CAAC,OAAO,CAACC,GAAG,CAAEtE,EAAG,CAAE,CAAC,CAChE,CAAC,cACNN,IAAA,QAAKsE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FvE,IAAA,CAACF,WAAW,EAAC0E,OAAO,MAACC,KAAK,MAACC,MAAM,CAAC,OAAO,CAACC,KAAK,CAAC,OAAO,CAACC,GAAG,CAAExE,EAAG,CAAE,CAAC,CAChE,CAAC,EACH,CAAC,cACNF,KAAA,QAAKoE,SAAS,CAAC,sFAAsF,CAAAC,QAAA,eACnGvE,IAAA,QAAKsE,SAAS,CAAC,4EAA4E,CAAAC,QAAA,cACzFvE,IAAA,OAAAuE,QAAA,CAAI,MAAI,CAAI,CAAC,CACV,CAAC,cACNvE,IAAA,QAAKsE,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CACpEV,WAAW,CAACgB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAC3B/E,IAAA,QAAiBsE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cAC9DrE,KAAA,QAAKoE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCvE,IAAA,MACEsE,SAAS,IAAAU,MAAA,CACPF,IAAI,CAACzD,IAAI,GAAK,KAAK,CAAG,gBAAgB,CAAG,eAAe,WAChD,CAAAkD,QAAA,CAETO,IAAI,CAACzD,IAAI,CACT,CAAC,cACJrB,IAAA,MACEsE,SAAS,iCAAAU,MAAA,CACPF,IAAI,CAACzD,IAAI,GAAK,KAAK,CAAG,YAAY,CAAG,YAAY,CAChD,CAAAkD,QAAA,CAEFO,IAAI,CAACpB,OAAO,CACZ,CAAC,EACD,CAAC,EAhBEqB,KAiBL,CACN,CAAC,CACC,CAAC,cACN7E,KAAA,QAAKoE,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5DvE,IAAA,UACEqB,IAAI,CAAC,MAAM,CACX4D,KAAK,CAAEvB,OAAQ,CACfwB,QAAQ,CAAGjB,CAAC,EAAKN,UAAU,CAACM,CAAC,CAACkB,MAAM,CAACF,KAAK,CAAE,CAC5CG,SAAS,CAAGnB,CAAC,EAAKD,cAAc,CAACC,CAAC,CAAE,CACpCoB,GAAG,CAAEzB,UAAW,CAChB0B,WAAW,CAAC,mBAAmB,CAC/BhB,SAAS,CAAC,8CAA8C,CACzD,CAAC,cACFtE,IAAA,WACEuF,OAAO,CAAEzB,WAAY,CACrBQ,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CACvD,MAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,cAENrE,KAAA,QAAKoE,SAAS,CAAC,mIAAmI,CAAAC,QAAA,eAChJvE,IAAA,WACEsE,SAAS,CAAC,sCAAsC,CAChDiB,OAAO,CAAEnB,UAAW,CAAAG,QAAA,CACrB,MAED,CAAQ,CAAC,cACTvE,IAAA,WACEsE,SAAS,CAAC,wCAAwC,CAClDiB,OAAO,CAAEzE,QAAS,CAAAyD,QAAA,CACnB,KAED,CAAQ,CAAC,cACTvE,IAAA,WAAQsE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACtD/D,GAAG,CAAG,OAAO,CAAG,WAAW,CACtB,CAAC,cACTR,IAAA,WACEsE,SAAS,CAAC,uCACV;AAAA,CAAAC,QAAA,CAECnE,EAAE,CAAG,GAAG,CAAG,IAAI,CACV,CAAC,EACN,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAD,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}