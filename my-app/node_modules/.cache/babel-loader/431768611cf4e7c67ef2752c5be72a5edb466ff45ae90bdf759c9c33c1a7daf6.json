{"ast":null,"code":"import React,{useCallback,useEffect,useState,useRef}from\"react\";import{socket}from\"../socket/Socket\";import{connect,useDispatch,useSelector}from\"react-redux\";import{selectAllMessages,selectAllUsers,selectUserId,setAllMessages}from\"./helpSlice\";import{NavigationType,useNavigate}from\"react-router-dom\";import peer from\"./Peer\";import ReactPlayer from\"react-player\";import\"./video.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Video=()=>{const[mic,setMic]=useState(true);const[cam,setCam]=useState(true);const[ms,setMs]=useState(null);const[rs,setRs]=useState(null);const[rec,setRec]=useState(null);const userId=useSelector(selectUserId);const onlineUsers=useSelector(selectAllUsers);const navigate=useNavigate();const dispatch=useDispatch();const newVideo=useCallback(()=>{peer.initializePeer();socket.emit(\"pairing-user-video\",userId,error=>{return error;});socket.on(\"user-paired\",async _ref=>{let{rid,type}=_ref;setRec(rid);if(type===\"call\"){const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:true});setMs(stream);const offer=await peer.getOffer();console.log(offer,\"creakjjkted-offer\");socket.emit(\"user:call\",{to:rid,offer});}});socket.on(\"user-call\",async _ref2=>{let{from,offer}=_ref2;console.log(offer,\"got-offer\");setRec(from);const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:true});setMs(stream);console.log(\"bheje\",offer);const answer=await peer.getAnswer(offer);socket.emit(\"call:accepted\",{to:from,ans:answer});});socket.on(\"call-accept\",async answer=>{console.log(answer,\"cretaed-answer\");await peer.setLocalDescription(answer);});return()=>{socket.off(\"user-paired\");socket.off(\"user-call\");socket.off(\"call-accept\");};},[]);useEffect(()=>{const trackEventListener=ev=>{const remoteStream=ev.streams[0];console.log(\"Got remote tracks\",remoteStream);setRs(remoteStream);};if(peer.peer&&peer.peer!==null){peer.peer.addEventListener(\"track\",trackEventListener);}return()=>{if(peer.peer&&peer.peer!==null){peer.peer.removeEventListener(\"track\",trackEventListener);}};},[rs,peer.peer]);useEffect(()=>{if(userId&&onlineUsers.find(user=>user.id===userId)){newVideo();}else{navigate(\"/\");}},[]);const handleNegotiation=useCallback(async()=>{console.log(\"Negotiation needed\");const offer=await peer.getOffer();console.log(offer,\"nego offer cretaed\");socket.emit(\"peer:nego:needed\",{offer,to:rec});},[rec]);useEffect(()=>{{peer.peer&&peer.peer.addEventListener(\"negotiationneeded\",handleNegotiation);}return()=>{{peer.peer&&peer.peer.removeEventListener(\"negotiationneeded\",handleNegotiation);}};},[handleNegotiation]);const handleFinalNego=useCallback(async _ref3=>{let{from,ans}=_ref3;await peer.setLocalDescription(ans);// helpStream()\n});useEffect(()=>{socket.on(\"peer:nego:needed\",async _ref4=>{let{from,offer}=_ref4;console.log(\"Received negotiation needed\");console.log(from,offer);const answer=await peer.getAnswer(offer);socket.emit(\"peer:nego:done\",{to:from,ans:answer});});socket.on(\"peer:nego:done\",async _ref5=>{let{from,ans}=_ref5;console.log(\"Negotiation done\",ans);await peer.setRemoteDescription(ans);});socket.on(\"peer:nego:final\",handleFinalNego);return()=>{socket.off(\"peer:nego:needed\");socket.off(\"peer:nego:done\");socket.off(\"peer:nego:final\");};},[rec]);const helpStream=useCallback(()=>{if(ms){for(const track of ms.getTracks()){peer.peer.addTrack(track,ms);}}},[ms]);// useEffect(()=>{\n//   if(ms && peer.peer){\n//     console.log(\"chahha\")\n//     for (const track of ms.getTracks()) {\n//       peer.peer.addTrack(track, ms);\n//     }\n//   }\n// },[ms])\n// .....................................................chat....................................................\nconst[message,setMessage]=useState(null);const chatBoxRef=useRef(null);const allMessages=useSelector(selectAllMessages);const handleClick=()=>{dispatch(setAllMessages({message:message,type:\"you\"}));socket.emit(\"send-message\",{rec,message});setMessage(\"\");};const handleKeyPress=e=>{if(message.length===0){return;}if(e.key===\"Enter\"){dispatch(setAllMessages({message:message,type:\"you\"}));socket.emit(\"send-message\",{reciever:rec,message});setMessage(\"\");}};useEffect(()=>{console.log(\"chla\");socket.on(\"send-message\",message=>{dispatch(setAllMessages({message:message,type:\"stranger\"}));setMessage(null);});return()=>{socket.off(\"send-message\");};},[dispatch]);const handleStop=()=>{// setStop(true);\nif(rec){socket.emit(\"chat-close\",rec,()=>{return{};});peer.closeConnection();setRec(null);setRs(null);setMs(null);dispatch(setAllMessages({type:\"end\"}));}else{socket.emit(\"unpairing-user-video\",userId,()=>{});}// navigate(\"/\")\n};const handleCam=()=>{setCam(!cam);};useEffect(()=>{socket.on(\"chat-close\",()=>{// setStop(true);\npeer.closeConnection();setRec(null);dispatch(setAllMessages({type:\"end\"}));setMessage(\"\");setMs(null);setRs(null);});return()=>{socket.off(\"chat-close\");};},[dispatch]);console.log(cam);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"sec\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vc\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"vc1\",children:/*#__PURE__*/_jsx(ReactPlayer,{className:\"player\",playing:true,height:\"100%\",width:\"100%\",url:rs})}),/*#__PURE__*/_jsx(\"div\",{className:\"vc2\",children:/*#__PURE__*/_jsx(ReactPlayer,{playing:true,height:\"100%\",width:\"100%\",url:ms,className:\"help\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"stop\",onClick:handleStop,children:\"Stop\"}),/*#__PURE__*/_jsx(\"button\",{className:\"new\",onClick:newVideo,children:\"New\"}),/*#__PURE__*/_jsx(\"button\",{className:\"connected \".concat(ms?\"con\":\"ncon\"),onClick:helpStream,children:ms?\"call\":\"Not-connected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mchat\",ref:chatBoxRef,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Chat\"}),allMessages.map((mess,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-start mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg p-4 max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(mess.type===\"you\"?\"text-black\":\"text-black\",\" m-auto\"),children:mess.type}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold font-serif \".concat(mess.type===\"you\"?\"text-black\":\"text-black\"),children:mess.message})]})},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"type\",children:[/*#__PURE__*/_jsx(\"input\",{style:{backgroundColor:\"lightpink\",borderRadius:\"20px\"},type:\"text\",value:message,onChange:e=>setMessage(e.target.value),onKeyDown:e=>handleKeyPress(e),ref:chatBoxRef// placeholder=\"Type a message...\"\n,className:\"input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"send\",children:\"Send\"})]})]})]})});};export default Video;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useRef","socket","connect","useDispatch","useSelector","selectAllMessages","selectAllUsers","selectUserId","setAllMessages","NavigationType","useNavigate","peer","ReactPlayer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Video","mic","setMic","cam","setCam","ms","setMs","rs","setRs","rec","setRec","userId","onlineUsers","navigate","dispatch","newVideo","initializePeer","emit","error","on","_ref","rid","type","stream","navigator","mediaDevices","getUserMedia","audio","video","offer","getOffer","console","log","to","_ref2","from","answer","getAnswer","ans","setLocalDescription","off","trackEventListener","ev","remoteStream","streams","addEventListener","removeEventListener","find","user","id","handleNegotiation","handleFinalNego","_ref3","_ref4","_ref5","setRemoteDescription","helpStream","track","getTracks","addTrack","message","setMessage","chatBoxRef","allMessages","handleClick","handleKeyPress","e","length","key","reciever","handleStop","closeConnection","handleCam","children","className","playing","height","width","url","onClick","concat","ref","map","mess","index","style","backgroundColor","borderRadius","value","onChange","target","onKeyDown"],"sources":["C:/Users/kuljeet/Desktop/catchup-final/client/my-app/src/features/Functions/Video.js"],"sourcesContent":["import React, { useCallback, useEffect, useState, useRef } from \"react\";\r\nimport { socket } from \"../socket/Socket\";\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectAllMessages,\r\n  selectAllUsers,\r\n  selectUserId,\r\n  setAllMessages,\r\n} from \"./helpSlice\";\r\nimport { NavigationType, useNavigate } from \"react-router-dom\";\r\nimport peer from \"./Peer\";\r\nimport ReactPlayer from \"react-player\";\r\nimport \"./video.css\";\r\n\r\nconst Video = () => {\r\n  const [mic, setMic] = useState(true);\r\n  const [cam, setCam] = useState(true);\r\n  const [ms, setMs] = useState(null);\r\n  const [rs, setRs] = useState(null);\r\n  const [rec, setRec] = useState(null);\r\n  const userId = useSelector(selectUserId);\r\n  const onlineUsers = useSelector(selectAllUsers);\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const newVideo = useCallback(() => {\r\n    peer.initializePeer();\r\n    socket.emit(\"pairing-user-video\", userId, (error) => {\r\n      return error;\r\n    });\r\n\r\n    socket.on(\"user-paired\", async ({ rid, type }) => {\r\n      setRec(rid);\r\n      if (type === \"call\") {\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: true,\r\n          video: true,\r\n        });\r\n        setMs(stream);\r\n\r\n        const offer = await peer.getOffer();\r\n        console.log(offer, \"creakjjkted-offer\");\r\n        socket.emit(\"user:call\", { to: rid, offer });\r\n      }\r\n    });\r\n\r\n    socket.on(\"user-call\", async ({ from, offer }) => {\r\n      console.log(offer, \"got-offer\");\r\n      setRec(from);\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        audio: true,\r\n        video: true,\r\n      });\r\n\r\n      setMs(stream);\r\n      console.log(\"bheje\", offer);\r\n      const answer = await peer.getAnswer(offer);\r\n      socket.emit(\"call:accepted\", { to: from, ans: answer });\r\n    });\r\n\r\n    socket.on(\"call-accept\", async (answer) => {\r\n      console.log(answer, \"cretaed-answer\");\r\n      await peer.setLocalDescription(answer);\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"user-paired\");\r\n      socket.off(\"user-call\");\r\n      socket.off(\"call-accept\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const trackEventListener = (ev) => {\r\n      const remoteStream = ev.streams[0];\r\n      console.log(\"Got remote tracks\", remoteStream);\r\n      setRs(remoteStream);\r\n    };\r\n\r\n    if (peer.peer && peer.peer !== null) {\r\n      peer.peer.addEventListener(\"track\", trackEventListener);\r\n    }\r\n\r\n    return () => {\r\n      if (peer.peer && peer.peer !== null) {\r\n        peer.peer.removeEventListener(\"track\", trackEventListener);\r\n      }\r\n    };\r\n  }, [rs, peer.peer]);\r\n\r\n  useEffect(() => {\r\n    if (userId && onlineUsers.find((user) => user.id === userId)) {\r\n      newVideo();\r\n    } else {\r\n      navigate(\"/\");\r\n    }\r\n  }, []);\r\n\r\n  const handleNegotiation = useCallback(async () => {\r\n    console.log(\"Negotiation needed\");\r\n    const offer = await peer.getOffer();\r\n    console.log(offer, \"nego offer cretaed\");\r\n    socket.emit(\"peer:nego:needed\", { offer, to: rec });\r\n  }, [rec]);\r\n\r\n  useEffect(() => {\r\n    {\r\n      peer.peer &&\r\n        peer.peer.addEventListener(\"negotiationneeded\", handleNegotiation);\r\n    }\r\n    return () => {\r\n      {\r\n        peer.peer &&\r\n          peer.peer.removeEventListener(\"negotiationneeded\", handleNegotiation);\r\n      }\r\n    };\r\n  }, [handleNegotiation]);\r\n\r\n  const handleFinalNego = useCallback(async ({ from, ans }) => {\r\n    await peer.setLocalDescription(ans);\r\n    // helpStream()\r\n  });\r\n\r\n  useEffect(() => {\r\n    socket.on(\"peer:nego:needed\", async ({ from, offer }) => {\r\n      console.log(\"Received negotiation needed\");\r\n      console.log(from, offer);\r\n      const answer = await peer.getAnswer(offer);\r\n      socket.emit(\"peer:nego:done\", { to: from, ans: answer });\r\n    });\r\n\r\n    socket.on(\"peer:nego:done\", async ({ from, ans }) => {\r\n      console.log(\"Negotiation done\", ans);\r\n      await peer.setRemoteDescription(ans);\r\n    });\r\n\r\n    socket.on(\"peer:nego:final\", handleFinalNego);\r\n\r\n    return () => {\r\n      socket.off(\"peer:nego:needed\");\r\n      socket.off(\"peer:nego:done\");\r\n      socket.off(\"peer:nego:final\");\r\n    };\r\n  }, [rec]);\r\n\r\n  const helpStream = useCallback(() => {\r\n    if (ms) {\r\n      for (const track of ms.getTracks()) {\r\n        peer.peer.addTrack(track, ms);\r\n      }\r\n    }\r\n  }, [ms]);\r\n\r\n  // useEffect(()=>{\r\n  //   if(ms && peer.peer){\r\n  //     console.log(\"chahha\")\r\n  //     for (const track of ms.getTracks()) {\r\n  //       peer.peer.addTrack(track, ms);\r\n  //     }\r\n  //   }\r\n  // },[ms])\r\n\r\n  // .....................................................chat....................................................\r\n  const [message, setMessage] = useState(null);\r\n  const chatBoxRef = useRef(null);\r\n  const allMessages = useSelector(selectAllMessages);\r\n\r\n  const handleClick = () => {\r\n    dispatch(setAllMessages({ message: message, type: \"you\" }));\r\n    socket.emit(\"send-message\", { rec, message });\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (message.length === 0) {\r\n      return;\r\n    }\r\n    if (e.key === \"Enter\") {\r\n      dispatch(setAllMessages({ message: message, type: \"you\" }));\r\n      socket.emit(\"send-message\", { reciever: rec, message });\r\n      setMessage(\"\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"chla\");\r\n    socket.on(\"send-message\", (message) => {\r\n      dispatch(setAllMessages({ message: message, type: \"stranger\" }));\r\n      setMessage(null);\r\n    });\r\n    return () => {\r\n      socket.off(\"send-message\");\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const handleStop = () => {\r\n    // setStop(true);\r\n    if (rec) {\r\n      socket.emit(\"chat-close\", rec, () => {\r\n        return {};\r\n      });\r\n      peer.closeConnection();\r\n      setRec(null);\r\n      setRs(null);\r\n      setMs(null);\r\n\r\n      dispatch(setAllMessages({ type: \"end\" }));\r\n    } else {\r\n      socket.emit(\"unpairing-user-video\", userId, () => {});\r\n    }\r\n    // navigate(\"/\")\r\n  };\r\n\r\n  const handleCam = () => {\r\n    setCam(!cam);\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"chat-close\", () => {\r\n      // setStop(true);\r\n      peer.closeConnection();\r\n      setRec(null);\r\n      dispatch(setAllMessages({ type: \"end\" }));\r\n      setMessage(\"\");\r\n      setMs(null);\r\n      setRs(null);\r\n    });\r\n    return () => {\r\n      socket.off(\"chat-close\");\r\n    };\r\n  }, [dispatch]);\r\n  console.log(cam);\r\n  return (\r\n    <>\r\n      <div className=\"sec\">\r\n        <div className=\"vc\">\r\n          <div className=\"vc1\">\r\n            <ReactPlayer\r\n              className=\"player\"\r\n              playing\r\n              height=\"100%\"\r\n              width=\"100%\"\r\n              url={rs}\r\n            />\r\n          </div>\r\n          <div className=\"vc2\">\r\n            <ReactPlayer\r\n              playing\r\n              height=\"100%\"\r\n              width=\"100%\"\r\n              url={ms}\r\n              className=\"help\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"chat\">\r\n          <div className=\"buttons\">\r\n            <button className=\"stop\" onClick={handleStop}>\r\n              Stop\r\n            </button>\r\n            <button className=\"new\" onClick={newVideo}>\r\n              New\r\n            </button>\r\n            {/* <button className=\"\">{rec ? \"found\" : \"Not found\"}</button> */}\r\n            <button\r\n              className={`connected ${ms ? \"con\" : \"ncon\"}`}\r\n              onClick={helpStream}\r\n            >\r\n              {ms ? \"call\" : \"Not-connected\"}\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"mchat\" ref={chatBoxRef}>\r\n            <h1>Chat</h1>\r\n            {allMessages.map((mess, index) => (\r\n              <div key={index} className=\"flex items-start justify-start mb-4\">\r\n                <div className=\"rounded-lg p-4 max-w-xs\">\r\n                  <p\r\n                    className={`${\r\n                      mess.type === \"you\" ? \"text-black\" : \"text-black\"\r\n                    } m-auto`}\r\n                  >\r\n                    {mess.type}\r\n                  </p>\r\n                  <p\r\n                    className={`text-xl font-bold font-serif ${\r\n                      mess.type === \"you\" ? \"text-black\" : \"text-black\"\r\n                    }`}\r\n                  >\r\n                    {mess.message}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"type\">\r\n            <input\r\n              style={{ backgroundColor: \"lightpink\", borderRadius: \"20px\" }}\r\n              type=\"text\"\r\n              value={message}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              onKeyDown={(e) => handleKeyPress(e)}\r\n              ref={chatBoxRef}\r\n              // placeholder=\"Type a message...\"\r\n              className=\"input\"\r\n            />\r\n            <button onClick={handleClick} className=\"send\">\r\n              Send\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Video;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}