{"ast":null,"code":"import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{io}from\"socket.io-client\";import{useMemo}from\"react\";import{v4 as uuidv4}from\"uuid\";import{selectAllUsers,selectRecuever,setAllMessages,setAllUsers,setReceiver,userId}from\"../Functions/helpSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";export const socket=io(\"https://u4m.vercel.app\");const Socket=()=>{const dispatch=useDispatch();const rec=useSelector(selectRecuever);const Do=useMemo(()=>{const id=uuidv4();console.log(id);dispatch(userId(id));socket.emit(\"new-user\",id,error=>{if(error){return alert(error);}});socket.on(\"get-online-users\",allUsers=>{console.log(allUsers);dispatch(setAllUsers(allUsers));});},[socket]);useEffect(()=>{socket.on(\"connect\",()=>{console.log(\"connected\",socket.id);});if(socket.id){Do();}return()=>{socket.disconnect(rec);};},[Do]);const users=useSelector(selectAllUsers);console.log(users);return/*#__PURE__*/_jsx(\"div\",{});};export default Socket;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","io","useMemo","v4","uuidv4","selectAllUsers","selectRecuever","setAllMessages","setAllUsers","setReceiver","userId","jsx","_jsx","socket","Socket","dispatch","rec","Do","id","console","log","emit","error","alert","on","allUsers","disconnect","users"],"sources":["C:/Users/kuljeet/Desktop/catchup-final/client/my-app/src/features/socket/Socket.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { io } from \"socket.io-client\";\r\nimport { useMemo } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { selectAllUsers, selectRecuever, setAllMessages, setAllUsers, setReceiver, userId } from \"../Functions/helpSlice\";\r\n\r\nexport const socket = io(\"https://u4m.vercel.app\");\r\nconst Socket = () => {\r\n  const dispatch = useDispatch();\r\n  const rec = useSelector(selectRecuever)\r\n\r\n  const Do = useMemo(() => {\r\n    const id = uuidv4();\r\n    console.log(id);\r\n    dispatch(userId(id));\r\n    socket.emit(\"new-user\", id, (error) => {\r\n      if (error) {\r\n        return alert(error);\r\n      }\r\n    });\r\n    socket.on(\"get-online-users\",(allUsers)=>{\r\n      console.log(allUsers)\r\n        dispatch(setAllUsers(allUsers))\r\n    })\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"connect\", () => {\r\n      console.log(\"connected\", socket.id);\r\n    });\r\n    if (socket.id) {\r\n      Do();\r\n    }\r\n    return () => {\r\n      socket.disconnect(rec);\r\n     \r\n    };\r\n  }, [Do]);\r\n\r\n  const users = useSelector(selectAllUsers)\r\n  console.log(users)\r\n\r\n  return <div></div>;\r\n};\r\n\r\nexport default Socket;\r\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,EAAE,KAAQ,kBAAkB,CACrC,OAASC,OAAO,KAAQ,OAAO,CAC/B,OAASC,EAAE,GAAI,CAAAC,MAAM,KAAQ,MAAM,CACnC,OAASC,cAAc,CAAEC,cAAc,CAAEC,cAAc,CAAEC,WAAW,CAAEC,WAAW,CAAEC,MAAM,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1H,MAAO,MAAM,CAAAC,MAAM,CAAGZ,EAAE,CAAC,wBAAwB,CAAC,CAClD,KAAM,CAAAa,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAiB,GAAG,CAAGhB,WAAW,CAACM,cAAc,CAAC,CAEvC,KAAM,CAAAW,EAAE,CAAGf,OAAO,CAAC,IAAM,CACvB,KAAM,CAAAgB,EAAE,CAAGd,MAAM,CAAC,CAAC,CACnBe,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC,CACfH,QAAQ,CAACL,MAAM,CAACQ,EAAE,CAAC,CAAC,CACpBL,MAAM,CAACQ,IAAI,CAAC,UAAU,CAAEH,EAAE,CAAGI,KAAK,EAAK,CACrC,GAAIA,KAAK,CAAE,CACT,MAAO,CAAAC,KAAK,CAACD,KAAK,CAAC,CACrB,CACF,CAAC,CAAC,CACFT,MAAM,CAACW,EAAE,CAAC,kBAAkB,CAAEC,QAAQ,EAAG,CACvCN,OAAO,CAACC,GAAG,CAACK,QAAQ,CAAC,CACnBV,QAAQ,CAACP,WAAW,CAACiB,QAAQ,CAAC,CAAC,CACnC,CAAC,CAAC,CACJ,CAAC,CAAE,CAACZ,MAAM,CAAC,CAAC,CAEZf,SAAS,CAAC,IAAM,CACde,MAAM,CAACW,EAAE,CAAC,SAAS,CAAE,IAAM,CACzBL,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEP,MAAM,CAACK,EAAE,CAAC,CACrC,CAAC,CAAC,CACF,GAAIL,MAAM,CAACK,EAAE,CAAE,CACbD,EAAE,CAAC,CAAC,CACN,CACA,MAAO,IAAM,CACXJ,MAAM,CAACa,UAAU,CAACV,GAAG,CAAC,CAExB,CAAC,CACH,CAAC,CAAE,CAACC,EAAE,CAAC,CAAC,CAER,KAAM,CAAAU,KAAK,CAAG3B,WAAW,CAACK,cAAc,CAAC,CACzCc,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC,CAElB,mBAAOf,IAAA,SAAU,CAAC,CACpB,CAAC,CAED,cAAe,CAAAE,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}