{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kuljeet\\\\Desktop\\\\catchup-final\\\\client\\\\my-app\\\\src\\\\features\\\\socket\\\\Socket.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { io } from \"socket.io-client\";\nimport { useMemo } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { selectAllUsers, selectRecuever, setAllMessages, setAllUsers, setReceiver, userId } from \"../Functions/helpSlice\";\n// https://u4m.vercel.app\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const socket = io(\"http://localhost:8000\");\nconst Socket = () => {\n  _s();\n  const dispatch = useDispatch();\n  const rec = useSelector(selectRecuever);\n  const Do = useMemo(() => {\n    const id = uuidv4();\n    console.log(id);\n    dispatch(userId(id));\n    socket.emit(\"new-user\", id, error => {\n      if (error) {\n        return alert(error);\n      }\n    });\n    socket.on(\"get-online-users\", allUsers => {\n      console.log(allUsers);\n      dispatch(setAllUsers(allUsers));\n    });\n  }, [socket]);\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      console.log(\"connected\", socket.id);\n    });\n    if (socket.id) {\n      Do();\n    }\n    return () => {\n      socket.disconnect(rec);\n    };\n  }, [Do]);\n  const users = useSelector(selectAllUsers);\n  console.log(users);\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 10\n  }, this);\n};\n_s(Socket, \"OM77v3yFhyteOS/FI+pVtahVZyY=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Socket;\nexport default Socket;\nvar _c;\n$RefreshReg$(_c, \"Socket\");","map":{"version":3,"names":["useEffect","useDispatch","useSelector","io","useMemo","v4","uuidv4","selectAllUsers","selectRecuever","setAllMessages","setAllUsers","setReceiver","userId","jsxDEV","_jsxDEV","socket","Socket","_s","dispatch","rec","Do","id","console","log","emit","error","alert","on","allUsers","disconnect","users","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/kuljeet/Desktop/catchup-final/client/my-app/src/features/socket/Socket.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { io } from \"socket.io-client\";\r\nimport { useMemo } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { selectAllUsers, selectRecuever, setAllMessages, setAllUsers, setReceiver, userId } from \"../Functions/helpSlice\";\r\n// https://u4m.vercel.app\r\nexport const socket = io(\"http://localhost:8000\");\r\nconst Socket = () => {\r\n  const dispatch = useDispatch();\r\n  const rec = useSelector(selectRecuever)\r\n\r\n  const Do = useMemo(() => {\r\n    const id = uuidv4();\r\n    console.log(id);\r\n    dispatch(userId(id));\r\n    socket.emit(\"new-user\", id, (error) => {\r\n      if (error) {\r\n        return alert(error);\r\n      }\r\n    });\r\n    socket.on(\"get-online-users\",(allUsers)=>{\r\n      console.log(allUsers)\r\n        dispatch(setAllUsers(allUsers))\r\n    })\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"connect\", () => {\r\n      console.log(\"connected\", socket.id);\r\n    });\r\n    if (socket.id) {\r\n      Do();\r\n    }\r\n    return () => {\r\n      socket.disconnect(rec);\r\n     \r\n    };\r\n  }, [Do]);\r\n\r\n  const users = useSelector(selectAllUsers)\r\n  console.log(users)\r\n\r\n  return <div></div>;\r\n};\r\n\r\nexport default Socket;\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,EAAE,QAAQ,kBAAkB;AACrC,SAASC,OAAO,QAAQ,OAAO;AAC/B,SAASC,EAAE,IAAIC,MAAM,QAAQ,MAAM;AACnC,SAASC,cAAc,EAAEC,cAAc,EAAEC,cAAc,EAAEC,WAAW,EAAEC,WAAW,EAAEC,MAAM,QAAQ,wBAAwB;AACzH;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAO,MAAMC,MAAM,GAAGZ,EAAE,CAAC,uBAAuB,CAAC;AACjD,MAAMa,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAMC,QAAQ,GAAGjB,WAAW,CAAC,CAAC;EAC9B,MAAMkB,GAAG,GAAGjB,WAAW,CAACM,cAAc,CAAC;EAEvC,MAAMY,EAAE,GAAGhB,OAAO,CAAC,MAAM;IACvB,MAAMiB,EAAE,GAAGf,MAAM,CAAC,CAAC;IACnBgB,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC;IACfH,QAAQ,CAACN,MAAM,CAACS,EAAE,CAAC,CAAC;IACpBN,MAAM,CAACS,IAAI,CAAC,UAAU,EAAEH,EAAE,EAAGI,KAAK,IAAK;MACrC,IAAIA,KAAK,EAAE;QACT,OAAOC,KAAK,CAACD,KAAK,CAAC;MACrB;IACF,CAAC,CAAC;IACFV,MAAM,CAACY,EAAE,CAAC,kBAAkB,EAAEC,QAAQ,IAAG;MACvCN,OAAO,CAACC,GAAG,CAACK,QAAQ,CAAC;MACnBV,QAAQ,CAACR,WAAW,CAACkB,QAAQ,CAAC,CAAC;IACnC,CAAC,CAAC;EACJ,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;EAEZf,SAAS,CAAC,MAAM;IACde,MAAM,CAACY,EAAE,CAAC,SAAS,EAAE,MAAM;MACzBL,OAAO,CAACC,GAAG,CAAC,WAAW,EAAER,MAAM,CAACM,EAAE,CAAC;IACrC,CAAC,CAAC;IACF,IAAIN,MAAM,CAACM,EAAE,EAAE;MACbD,EAAE,CAAC,CAAC;IACN;IACA,OAAO,MAAM;MACXL,MAAM,CAACc,UAAU,CAACV,GAAG,CAAC;IAExB,CAAC;EACH,CAAC,EAAE,CAACC,EAAE,CAAC,CAAC;EAER,MAAMU,KAAK,GAAG5B,WAAW,CAACK,cAAc,CAAC;EACzCe,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;EAElB,oBAAOhB,OAAA;IAAAiB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAU,CAAC;AACpB,CAAC;AAACjB,EAAA,CApCID,MAAM;EAAA,QACOf,WAAW,EAChBC,WAAW,EA8BTA,WAAW;AAAA;AAAAiC,EAAA,GAhCrBnB,MAAM;AAsCZ,eAAeA,MAAM;AAAC,IAAAmB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}